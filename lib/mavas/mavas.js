var Mavas=function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=2)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){return Number(t.toFixed(e))},i=function(t){return/^[0-9]+$/.test(t)},o=function(t,e){for(var a=void 0,n=[],i=0,o=t.length;i<o;i++)void 0===(a=t[i][e])&&null===a||n.push(a);return n},r={toDecimal:n,isNumber:i,pluck:o};e.default=r},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a(0),l=n(r),c=a(4),s=n(c),u=function(){function t(){i(this,t),this.customLayers=[]}return o(t,[{key:"createLayer",value:function(t){var e=void 0,a=void 0,n=void 0;switch(t.type){case"external":break;case"polyline":return e={type:t.type,cacheAlgo:t.cacheAlgo||"9 blocks",delay:t.delay&&l.default.isNumber(t.delay.interval)&&l.default.isNumber(t.delay.size)?{interval:Number(t.delay.interval),size:Number(t.delay.size)}:void 0,data:t.data||[],color:t.color||"black"},this.createPalette(e);case"marker":if(e={type:t.type,data:t.data||[],color:t.color||"black"},a=this.createPalette(e),t.tooltip){if(t.tooltip.length===e.data.length)return n=this.createLayer({type:"tooltip",data:{marker:e.data,tooltip:t.tooltip}}),{palette:a,paletteTooltip:n};throw new Error("tooltip length must equal to data points length")}return a;case"tooltip":return e=Object.assign({},t),this.createPalette(e);default:throw new Error("unknown layer type")}}},{key:"createPalette",value:function(t){var e=void 0;return e=new s.default(this.map,t),this.customLayers.push(e),e.importData(t.data),e}},{key:"draw",value:function(t){for(var e=void 0,a=void 0,n=0,i=this.customLayers.length;n<i;n++)a=this.customLayers[n],e=new AMap.CustomLayer(a.canvas,t),e.render=a.draw.bind(a),e.setMap(this.map)}}]),t}();e.default=u},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(0);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var l=a(1),c=function(t){return t&&t.__esModule?t:{default:t}}(l),s=function(t){function e(t,a){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.map=new AMap.Map(t,a),o}return o(e,t),e}(c.default);e.default=s},function(t,e,a){"use strict";function n(t){this.marker={},this.marker.original=[];for(var e=0,a=t.length;e<a;e++){var n=t[e],i=e.toString();this.marker.original.push({data:n,lngLat:new AMap.LngLat(n[0],n[1]),flagDesc:i,flagDescLen:i.length})}}function i(){var t=this,e=void 0,a=void 0,n=function(){var n=new Date,i=void 0,o=void 0;d||(d=document.createElement("canvas"),d.width=t.map.getSize().width,d.height=t.map.getSize().height,f=d.getContext("2d")),f.clearRect(0,0,d.width,d.height);for(var r=0,l=t.marker.cache.length;r<l;r++)if(e=t.marker.cache[r],e.data){switch(a=t.map.lngLatToContainer(e.lngLat),f.drawImage(c,a.x-s/2,a.y-u),e.flagDescLen){case 1:i=a.x-3,o=a.y-15;break;case 2:i=a.x-6,o=a.y-15;break;default:i=a.x-9,o=a.y-15}f.fillText(e.flagDesc,i,o)}t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.ctx.drawImage(d,0,0),console.log("canvas api uses "+(new Date-n)+"ms")};this.setBoundLngLat(),this.cacheVisibleMarker(),h?n():(c.src=l.default,c.onload=function(){n(),h=!0})}function o(){var t=new Date;this.marker.cache=[];for(var e=0,a=this.marker.original.length;e<a;e++){var n=this.marker.original[e],i=n.data[0],o=n.data[1];i<=this.boundLngLat[0]&&o<=this.boundLngLat[1]&&i>=this.boundLngLat[2]&&o>=this.boundLngLat[3]?this.marker.cache.push(Object.assign({},n)):this.marker.cache.push({flagDesc:n.flagDesc,flagDescLen:n.flagDescLen})}console.log("cache function uses "+(new Date-t)+"ms")}Object.defineProperty(e,"__esModule",{value:!0});var r=a(7),l=function(t){return t&&t.__esModule?t:{default:t}}(r),c=document.createElement("img"),s=19,u=31,h=!1,d=void 0,f=void 0;e.default={importData:n,draw:i,cacheVisibleMarker:o}},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a(5),l=n(r),c=a(3),s=n(c),u=a(6),h=n(u),d=function(){function t(e,a){switch(i(this,t),a.type){case"polyline":this.importData=l.default.importData,this.draw=l.default.draw,this.cacheVisiblePolyline=l.default.cacheVisiblePolyline;break;case"marker":this.importData=s.default.importData,this.draw=s.default.draw,this.cacheVisibleMarker=s.default.cacheVisibleMarker;break;case"tooltip":this.importData=h.default.importData,this.draw=h.default.draw,this.cacheVisibleTooltip=h.default.cacheVisibleTooltip}this.map=e,this.option=a,this.canvas=document.createElement("canvas"),this.canvas.width=this.map.getSize().width,this.canvas.height=this.map.getSize().height,this.ctx=this.canvas.getContext("2d")}return o(t,[{key:"setBoundLngLat",value:function(){var t=void 0,e=void 0,a=void 0;t=this.map.getBounds(),a=t.getNorthEast(),e=t.getSouthWest(),this.boundLngLat=[a.lng,a.lat,e.lng,e.lat]}},{key:"setCentreLngLat",value:function(){var t=void 0;t=this.map.getCenter(),this.centreLngLat=[t.lng,t.lat]}}]),t}();e.default=d},function(t,e,a){"use strict";function n(t){this.polyline={},this.polyline.original=t}function i(){var t=this,e=void 0,a=void 0,n=void 0,i=void 0;this.setBoundLngLat(),this.setCentreLngLat(),this.cacheVisiblePolyline(),this.ctx.strokeStyle=this.option.color,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),void 0===this.option.delay?function(){for(var o=new Date,r=0,l=t.polyline.cache.length;r<l;r++){e=t.polyline.cache[r],t.ctx.beginPath();for(var c=0,s=e.length;c<s;c++)a=e[c],n=new AMap.LngLat(a[0],a[1]),i=t.map.lngLatToContainer(n),t.ctx.lineTo(i.x,i.y);t.ctx.stroke()}console.log("canvas api uses "+(new Date-o)+"ms")}():function(o){var r=new Date,l=o.interval,c=o.size,s=0,u=t.polyline.cache.length/c,h=setInterval(function(){for(var o=s*c,r=(s+1)*c>t.polyline.cache.length?t.polyline.cache.length:(s+1)*c;o<r;o++){e=t.polyline.cache[o],t.ctx.beginPath();for(var l=0,d=e.length;l<d;l++)a=e[l],n=new AMap.LngLat(a[0],a[1]),i=t.map.lngLatToContainer(n),t.ctx.lineTo(i.x,i.y);t.ctx.stroke()}s+1>u&&clearInterval(h),s++},l);console.log("canvas api uses "+(new Date-r)+"ms")}(this.option.delay)}function o(){function t(t,e){var a=[t[0]-e[0],t[1]-e[1]],n=[t[0]-e[2],t[1]-e[3]];return a[0]<0&&a[1]<0&&n[0]>0&&n[1]>0?0:a[0]<0&&a[1]>0&&n[0]>0&&n[1]>0?1:a[0]>0&&a[1]>0?2:a[0]>0&&a[1]<0&&n[0]>0&&n[1]>0?3:a[0]>0&&a[1]<0&&n[0]>0&&n[1]<0?4:a[0]<0&&a[1]<0&&n[0]>0&&n[1]<0?5:n[0]<0&&n[1]<0?6:a[0]<0&&a[1]<0&&n[0]<0&&n[1]>0?7:a[0]<0&&a[1]>0&&n[0]<0&&n[1]>0?8:void 0}var e=this;switch(this.option.cacheAlgo){case"9 blocks":!function(){var a=new Date,n=function(){!0!==c.isDrawn&&r.push(c.lngLat),r.push(l.lngLat),c=Object.assign({},l,{isDrawn:!0})},i=function(){!0===c.isDrawn&&r.push(l.lngLat),0!==r.length&&(e.polyline.cache.push(r),r=[]),c=Object.assign({},l,{isDrawn:!1})},o=void 0,r=void 0,l={},c={},s=void 0,u=void 0;e.polyline.cache=[],u=Math.sqrt(e.centreLngLat[0]-e.boundLngLat[0]^e.centreLngLat[1]-e.boundLngLat[1]+2^2);for(var h=0,d=e.polyline.original.length;h<d;h++){o=e.polyline.original[h],r=[];for(var f=1,p=o.length;f<p;f++)if(1==f&&(c.lngLat=o[f-1],c.position=t(c.lngLat,e.boundLngLat),0===c.position&&(r.push(c.lngLat),c.isDrawn=!0)),l.lngLat=o[f],l.position=t(l.lngLat,e.boundLngLat),s=Math.abs(l.position-c.position),0!==l.position)if(0!==s){if(c.position%2!=0)switch(s){case 1:case 7:i();continue;case 4:n();continue}else switch(s){case 1:case 2:case 6:case 7:i();continue}var g=c.lngLat[1]-l.lngLat[1],v=l.lngLat[0]-c.lngLat[0],L=c.lngLat[0]*l.lngLat[1]-l.lngLat[0]*c.lngLat[1],b=Math.abs((g*e.centreLngLat[0]+v*e.centreLngLat[1]+L)/Math.sqrt(g^2+v^2));b>u?i():n()}else i();else n();0!==r.length&&(e.polyline.cache.push(r),r=[])}console.log("cache function uses "+(new Date-a)+"ms")}();break;case"simple":!function(){var t=new Date,a=void 0,n=void 0,i=void 0;a=e.boundLngLat[0]-e.boundLngLat[2],n=e.boundLngLat[1]-e.boundLngLat[3],i=[e.boundLngLat[2]-a,e.boundLngLat[3]-n,e.boundLngLat[0]+a,e.boundLngLat[1]+n],e.polyline.cache=[],e.polyline.original.forEach(function(t){var a=[];t.forEach(function(t){var e=t[0],n=t[1];e>=i[0]&&n>=i[1]&&e<=i[2]&&n<=i[3]&&a.push(t)}),0!==a.length&&e.polyline.cache.push(a)}),console.log("cache function uses "+(new Date-t)+"ms")}()}}Object.defineProperty(e,"__esModule",{value:!0}),e.default={importData:n,draw:i,cacheVisiblePolyline:o}},function(t,e,a){"use strict";function n(t){this.tooltip={},this.tooltip.original={},this.tooltip.original.marker=[],this.tooltip.original.tooltip=[];for(var e=0,a=t.marker.length;e<a;e++){var n=t.marker[e];this.tooltip.original.marker.push({data:n,lngLat:new AMap.LngLat(n[0],n[1]),id:e}),this.tooltip.original.tooltip.push(t.tooltip[e])}}function i(){var t=this,e=void 0,a=void 0,n=void 0;this.setBoundLngLat(),this.cacheVisibleTooltip(),c||(this.map.on("mousemove",function(i){n=[];for(var o=0,r=t.tooltip.cache.length;o<r;o++)e=t.tooltip.cache[o],a=e.boundPixcel,i.pixel.x<=a[0]&&i.pixel.y>=a[1]&&i.pixel.x>=a[2]&&i.pixel.y<=a[3]&&n.push(e);t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),0!==n.length&&(e=n.pop(),t.ctx.fillText(e.tooltip,e.boundPixcel[0],e.boundPixcel[3]))}),c=!0)}function o(){var t=new Date,e=void 0;this.tooltip.cache=[];for(var a=0,n=this.tooltip.original.marker.length;a<n;a++){var i=this.tooltip.original.marker[a],o=this.tooltip.original.tooltip[a],c=i.data[0],s=i.data[1];c<=this.boundLngLat[0]&&s<=this.boundLngLat[1]&&c>=this.boundLngLat[2]&&s>=this.boundLngLat[3]&&(e=this.map.lngLatToContainer(i.lngLat),this.tooltip.cache.push(Object.assign({},i,{boundPixcel:[e.x+r/2,e.y-l,e.x-r/2,e.y],tooltip:o})))}console.log("cache function uses "+(new Date-t)+"ms")}Object.defineProperty(e,"__esModule",{value:!0});var r=19,l=31,c=!1;e.default={importData:n,draw:i,cacheVisibleTooltip:o}},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAhCAYAAAA74pBqAAACmElEQVR42qWUXUiTcRTG35Kiy+imCJISp+9mLmcrTae1/Nz0Iug2qCgMKyRik4r8zpzfm5predFlXdZNEfkJIVRQkkQRTfuSlLXMOTc1t9N5IAY25/a+Xfz4c855nh8MtglEFIaxxbuTMTPDzBSz9PcdwR73tXqrBkOzZxPTwPiMtiUqsQeo1EFU2sfwixl73JFDfk1ZsWVuKzNgsPqp5A6RsS8yuCPH+UFm2ypZUdNsHNNfbPOTEaIYQZ57o8zmkKyw0V1b1L5ABgdJBj30CbKCG67tjK/QvkKFjqBk0EMfHiGvfsaU3zZPBbeDskGfPWbhaN33wbwuP+XZA7JBHx5BX/NtRt+zTPreFdmgz55p4XDVl8CR3t/0v8Aj5F6fnM/tWaLcW8uyQZ89HiHnmvO1rtNLOl7IBX32jAnZVz/Ysi0uOtS9KBv02dMtZFW+z8yqmqSMLr9s0IdHwDc30/x2OLNxmg7afJJBD/3QzynDNJ7MLGo7PKS1LsQM8uihH5KBA5fH6rQ1nyjd6o0Z5NEL+wvSXnq1hZnQ3JyhfZ3zUUEOefTCZCC94uUxzZV3lNrhiQpyyEf8pwWai8/71bWfKaV9LiK4c24A+XVlaRdG1UxA1faLIoE7clFlQF3+7F5KlZPE1tkwsMcduZhkqedGVExQ0fqT/gV73GOWgb1lQw+SqycoscUdAjP2uEuSqc4O5IsVLyih2R0CM/aSZcozTzcwzoSGKdpj+UF4MWMvWQbE00+qE01vKN7iIrw812AvS5Z86rGoKBuiXU0uwotZtgwknXz0Mb7+K+HFLFmWIsRtZHYwYtLxu/d3m8cJL2bscZciQ2k/EHXmcsWJh14xp/I8ZoC7FJkSpXVQyvqYTBoEeKN9zD/ozGaYK5XXKgAAAABJRU5ErkJggg=="}]);
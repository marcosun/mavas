var Mavas=function(t){function e(i){if(a[i])return a[i].exports;var n=a[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=16)}([function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(){!0===this.isInitialLoad&&(this.isInitialLoad=!1),void 0===this.isInitialLoad&&(this.isInitialLoad=!0)}function o(t){var e=this,a=function(a){e.drag=Object.assign({},e.drag,{isDrag:!0,isFirstMove:!0,start:a,end:void 0}),document.body.addEventListener("mouseup",i),document.body.addEventListener("mousemove",n),t(a)},i=function a(i){e.drag=Object.assign({},e.drag,{isDrag:!1,isFirstMove:!1,end:i}),document.body.removeEventListener("mouseup",a),document.body.removeEventListener("mousemove",n),t(i)},n=function(a){e.drag=Object.assign({},e.drag,{isFirstMove:!1}),t(a)};this.drag={isDrag:!1},this.bindEvent("mousedown",a)}function l(t,e){switch(t){case"drag":o.call(this,e);break;default:this.addEventListener(t,e)}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(t,e){return Number(t.toFixed(e))},d=function(t){return/^[0-9]+$/.test(t)},u=function(t,e){for(var a=void 0,i=[],n=0,o=t.length;n<o;n++)void 0===(a=t[n][e])&&null===a||i.push(a);return i},h=function(t){"-"===t.style.top[0]?t.style.marginTop=t.style.top.slice(1):t.style.marginTop="-"+t.style.top,"-"===t.style.left[0]?t.style.marginLeft=t.style.left.slice(1):t.style.marginLeft="-"+t.style.left},f=function(t){t.style.marginTop=null,t.style.marginLeft=null},p=function(t,e){for(var a=void 0,i=t.length-1;i>=0;i--)if(!0===e(t[i],i,t)){a=t[i];break}return a},g=function(t,e){for(var a=[],i=0,n=t.length;i<n;i++)!0===e(t[i],i,t)&&a.push(t[i]);return a},v=function(t,e){for(var a=[],i=0,n=t.length;i<n;i++)!0===e(t[i],i,t)&&a.push(i);return a},y=function(t){var e=[];if(!(t instanceof Array))throw new Error("this function applies to Array only");return function t(a){for(var i=0,n=a.length;i<n;i++)a[i]instanceof Array?t(a[i]):e.push(a[i])}(t),e},m=function(t){var e=[],a={},i=void 0,n=void 0;if(!(t instanceof Array))throw new Error("this function applies to Array only");for(var o=0,l=t.length;o<l;o++)i=t[o],n=void 0===i?"undefined":s(i),a[i]?a[i].indexOf(n)<0&&(a[i].push(n),e.push(i)):(a[i]=[n],e.push(i));return e},b=function(){function t(e){i(this,t),this.interval=e}return r(t,[{key:"exec",value:function(t){var e=this;void 0!==this.delayId&&clearTimeout(this.delayId),this.delayId=setTimeout(function(){e.delayId=void 0,t()},this.interval)}},{key:"execNodelay",value:function(t){void 0!==this.delayId&&void 0===clearTimeout(this.delayId)&&(this.delayId=void 0),t()}}]),t}(),x=function(t,e){for(property in e)Object.hasOwnProperty(e,property)&&(t.prototype[property]=e[property])},w=function(t,e){var a={topLeft:{x:t.x,y:t.y},bottomRight:{x:t.x+t.width,y:t.y+t.height}};return e.x>=a.topLeft.x&&e.y>=a.topLeft.y&&e.x<=a.bottomRight.x&&e.y<=a.bottomRight.y},L=function(t,e){var a={topLeft:{x:t.x,y:t.y}};return{x:e.x-a.topLeft.x,y:e.y-a.topLeft.y}},C=function(t,e){return t+e},I=function(t){setTimeout(function(){t()})},M=function(t,e){if(t.length!==e.length)return!1;for(var a=0,i=t.length;a<i;a++)if(t[a]!==e[a])return!1;return!0},R=function(t,e){var a=Object.getOwnPropertyNames(e.prototype);a=a.filter(function(t){return"constructor"!==t});for(var i=0,n=a.length;i<n;i++)t.__proto__[a[i]]||(t.__proto__[a[i]]=e.prototype[a[i]])},P={toDecimal:c,isNumber:d,pluck:u,offsetCanvasPositionOnDrag:h,resetCanvasPositionAfterDrag:f,setIsInitialLoadIndicator:n,findLast:p,findAll:g,findIndex:v,flatten:y,unique:m,Delay:b,Mixin:x,bindEvent:l,isPointInPath:w,pointPositionRelativeToPath:L,sum:C,timeout:I,isEqual:M,inherits:R};e.default=P},function(t,e,a){"use strict";function i(){function t(t,e){var a=[t.lng-e[0],t.lat-e[1]],i=[t.lng-e[2],t.lat-e[3]];return a[0]<0&&a[1]<0&&i[0]>0&&i[1]>0?0:a[0]<0&&a[1]>0&&i[0]>0&&i[1]>0?1:a[0]>0&&a[1]>0?2:a[0]>0&&a[1]<0&&i[0]>0&&i[1]>0?3:a[0]>0&&a[1]<0&&i[0]>0&&i[1]<0?4:a[0]<0&&a[1]<0&&i[0]>0&&i[1]<0?5:i[0]<0&&i[1]<0?6:a[0]<0&&a[1]<0&&i[0]<0&&i[1]>0?7:a[0]<0&&a[1]>0&&i[0]<0&&i[1]>0?8:void 0}var e=this,a=function(){var a=void 0,i=void 0,n=void 0,r=void 0,s=void 0,c=void 0;e[l].cache=[];var d=function(t){e[l].cache.push({coords:o.default.pluck(t,"coords"),lnglat:o.default.pluck(t,"lnglat"),symbol:a.symbol,lineStyle:a.lineStyle})},u=function(){!0!==r.isDrawn&&i.push(r),i.push(n),r=Object.assign({},n,{isDrawn:!0})},h=function(){!0===r.isDrawn&&i.push(n),0!==i.length&&(d(i),i=[]),r=Object.assign({},n,{isDrawn:!1})};c=Math.sqrt(Math.pow(e.mapCentre.lng-e.boundLngLat[0],2)+Math.pow(e.mapCentre.lat-e.boundLngLat[1],2));for(var f=0,p=e[l].original.length;f<p;f++){a=e[l].original[f],i=[];for(var g=1,v=a.coords.length;g<v;g++)if(1==g&&(r={coords:a.coords[g-1],lnglat:a.lnglat[g-1]},r.position=t(r.lnglat,e.boundLngLat),0===r.position&&(r.isDrawn=!0,i.push(r))),n={coords:a.coords[g],lnglat:a.lnglat[g]},n.position=t(n.lnglat,e.boundLngLat),s=Math.abs(n.position-r.position),0!==n.position)if(0!==s){if(r.position%2!=0)switch(s){case 1:case 7:h();continue;case 4:u();continue}else switch(s){case 1:case 2:case 6:case 7:h();continue}var y=r.lnglat.lat-n.lnglat.lat,m=n.lnglat.lng-r.lnglat.lng,b=r.lnglat.lng*n.lnglat.lat-n.lnglat.lng*r.lnglat.lat,x=Math.abs((y*e.mapCentre.lng+m*e.mapCentre.lat+b)/Math.sqrt(Math.pow(y,2)+Math.pow(m,2)));x>c?h():u()}else h();else u();0!==i.length&&(d(i),i=[])}},i=function(){var t=void 0,a=void 0,i=void 0;t=e.boundLngLat[0]-e.boundLngLat[2],a=e.boundLngLat[1]-e.boundLngLat[3],i=[e.boundLngLat[2]-t,e.boundLngLat[3]-a,e.boundLngLat[0]+t,e.boundLngLat[1]+a],e[l].cache=[],e[l].original.forEach(function(t){var a={coords:[],lnglat:[],symbol:t.symbol,lineStyle:t.lineStyle};t.lnglat.forEach(function(e,n){var o=e.lng,l=e.lat;o>=i[0]&&l>=i[1]&&o<=i[2]&&l<=i[3]&&(a.lnglat.push(e),a.coords.push(t.coords[n]))}),0!==a.coords.length&&e[l].cache.push(a)})},n=function(){switch(e.options.algo.cacheAlgo){case"9 blocks":a();break;case"simple":i()}},l=void 0;switch(this.options.type){case"polyline":l="polyline",n();break;case"curve":case"quadraticCurve":l="curve",n();break;case"marker":l="marker",function(){e.marker.cache=[];for(var t=0,a=e.marker.original.length;t<a;t++){var i=e.marker.original[t],n=i.coords[0],o=i.coords[1],l=void 0;n<=e.boundLngLat[0]&&o<=e.boundLngLat[1]&&n>=e.boundLngLat[2]&&o>=e.boundLngLat[3]&&(l=e.map.lngLatToContainer(i.lnglat),e.marker.cache.push(Object.assign({},i,{pixel:l})))}}()}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=a(0),o=function(t){return t&&t.__esModule?t:{default:t}}(n)},function(t,e,a){"use strict";function i(t){var e=this,a=function(t){for(var a=void 0,i=void 0,o=void 0,l=0,r=t.length;l<r;l++){a=t[l],o=Object.assign({},t[l],{lnglat:[]});for(var s=0,c=a.coords.length;s<c;s++)i=a.coords[s],o.lnglat.push(new window.AMap.LngLat(i[0],i[1]));e[n].original.push(o)}},i=function(t){e[t]={},e[t].original=[]},n=void 0;switch(this.options.type){case"polyline":n="polyline",i(n),a(t);break;case"curve":case"quadraticCurve":n="curve",i(n),a(t);break;case"marker":n="marker",i(n),function(t){for(var a=void 0,i=void 0,o=void 0,r=void 0,s=void 0,c={x:null,y:null},d=0,u=t.length;d<u;d++){if(i=t[d].coords,a=t[d].icon)r=a;else{switch(function(){r=document.createElement("canvas"),r.width=l.width,r.height=l.height,s=r.getContext("2d")}(),s.drawImage(l,0,0),o=d.toString(),o.length){case 1:c.x=l.width/2-3,c.y=l.height/2-2;break;case 2:c.x=l.width/2-6,c.y=l.height/2-2;break;default:c.x=l.width/2-9,c.y=l.height/2-2}s.fillText(o,c.x,c.y)}e[n].original.push({coords:i,icon:r,lnglat:new window.AMap.LngLat(i[0],i[1])})}}(t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=a(19),o=function(t){return t&&t.__esModule?t:{default:t}}(n),l=document.createElement("img");l.src=o.default},function(t,e,a){"use strict";function i(t,e,a,i){var r=document.createElement("canvas"),s=r.getContext("2d"),c=Object.assign({},a,{y:-a.y}),d=Object.assign({},i,{y:-i.y});r.width=2*e.size[0],r.height=2*e.size[1];var u=e.size[0]/2,h={x:e.size[0],y:e.size[1]};s.fillStyle=e.color,n(s,h),l(s,c,d),o(s,h),s.beginPath(),s.moveTo(u,u),s.lineTo(e.size[0]+u,e.size[0]/2+u),s.lineTo(u,e.size[0]+u),s.closePath(),s.fill(),"arrow"===e.symbol[0]&&t.drawImage(r,a.x-2*h.x,a.y-h.y),"arrow"===e.symbol[1]&&t.drawImage(r,i.x-h.x,i.y-h.y)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=function(t,e){t.translate(e.x,e.y)},o=function(t,e){t.translate(-e.x,-e.y)},l=function(t,e,a){var i=r(e,a);return i=-i,e.x<a.x?t.rotate(i):e.x>a.x?t.rotate(i-Math.PI):e.y>a.y?t.rotate(i):e.y<a.y?t.rotate(i-Math.PI):void 0},r=function(t,e){return Math.atan(s(t,e))},s=function(t,e){return(e.y-t.y)/(e.x-t.x)}},function(t,e,a){"use strict";function i(t,e){var a=e.type,i=e.color;t.save(),"dash"===a&&t.setLineDash([3,5]),t.strokeStyle=i,t.stroke(),t.restore()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,a){"use strict";function i(t){var e=void 0;switch(t.type){case"polyline":case"curve":case"quadraticCurve":e={type:t.type,id:t.id,algo:s(t.algo),lineStyle:r(t.lineStyle)},e=Object.assign({},e,{data:l(t.data,e)});break;case"marker":e={type:t.type,id:t.id,data:u(t.data),algo:s(t.algo),onClick:t.onClick instanceof Function?t.onClick:void 0};break;case"tooltip":if(e={type:t.type,data:{location:t.data&&t.data.location instanceof Array?t.data.location:[],markerSize:t.data&&t.data.markerSize instanceof Array?t.data.markerSize:[],desc:t.data&&t.data.desc instanceof Array?t.data.desc:[]},cumulative:!0===t.cumulative,left:"number"==typeof t.left?t.left:10,padding:"number"==typeof t.padding?t.padding:6,width:"number"==typeof t.width?t.width:108,lineHeight:"number"==typeof t.lineHeight?t.lineHeight:1.6,font:"string"==typeof t.font?t.font:"12px monospace",color:"string"==typeof t.color?t.color:"white",backgroundColor:"string"==typeof t.backgroundColor?t.backgroundColor:"rgba(0, 0, 0, 0.7)"},e.data.location.length!==e.data.markerSize.length||e.data.location.length!==e.data.desc.length)throw new Error("number of location, markerSize, and desc must be identical");break;case"fixedLocationExternal":e={type:t.type,id:t.id,data:t.image,position:function(){if(t.position instanceof Array==!0&&2===t.position.length&&"number"==typeof t.position[0]&&"number"==typeof t.position[1])return t.position;throw new Error("unkown position")}()};break;case"fixedScreenExternal":e={type:t.type,id:t.id,data:t.image,position:function(){if("string"==typeof t.position)switch(t.position){case"top":case"topright":case"topleft":case"right":case"bottom":case"bottomright":case"bottomleft":case"left":case"center":return t.position;default:return"topright"}return t.position instanceof Array==!0&&2===t.position.length&&"number"==typeof t.position[0]&&"number"==typeof t.position[1]?t.position:"topright"}()};break;default:throw new Error("unknown layer type")}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=a(0),o=function(t){return t&&t.__esModule?t:{default:t}}(n),l=function(t,e){var a={coords:[],symbol:d(e.symbol),lineStyle:r(e.lineStyle)},i=[];if(t instanceof Array){if(t[0]instanceof Array){for(var n=0,o=t.length;n<o;n++)i.push(Object.assign({},a,{coords:t[n]}));return i}for(var l=0,s=t.length;l<s;l++)i.push({coords:t[l].coords,symbol:t[l].symbol?d(t[l].symbol):a.symbol,lineStyle:t[l].lineStyle?r(t[l].lineStyle):a.lineStyle});return i}return a},r=function(t){var e={type:"line",color:"black"};return t?{type:"string"==typeof t.type?t.type:e.type,color:"string"==typeof t.color?t.color:e.color}:e},s=function(t){var e={cacheAlgo:"9 blocks",delay:c(),isRealtime:!0};return t?{cacheAlgo:"string"==typeof t.cacheAlgo?t.cacheAlgo:e.cacheAlgo,delay:!0===t.isRealtime?c():c(t.delay),isRealtime:!0===t.isRealtime}:e},c=function(t){var e={interval:void 0,size:void 0};return t?{interval:o.default.isNumber(t.interval)?Number(t.interval):e.interval,size:o.default.isNumber(t.size)?Number(t.size):e.size}:e},d=function(t){var e={symbol:["none","none"],size:[10,10],color:"black"},a=void 0,i=void 0,n=void 0;return t?(a=t.symbol instanceof Array&&2===t.symbol.length?t.symbol:e.symbol,i=t.size instanceof Array&&2===t.size.length?t.size:e.size,n="string"==typeof t.color?t.color:e.color,Object.assign({},e,{symbol:a,size:i,color:n})):e},u=function(t){var e={coords:[],icon:void 0},a=[];if(t instanceof Array){for(var i=0,n=t.length;i<n;i++){var o=t[i].coords?t[i].coords:e.coords,l=t[i].icon?t[i].icon:e.icon;a.push({coords:o,icon:l})}return a}return e}},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),s=a(14),c=i(s),d=a(17),u=i(d),h=a(5),f=i(h),p=function(t){function e(){n(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.customLayers=[],t}return l(e,t),r(e,[{key:"createLayer",value:function(t){var e=(0,f.default)(t);return this.createPalette(e)}},{key:"createPalette",value:function(t){var e=void 0;return e=new u.default(this.map,t),this.customLayers.push(e),e.import(t.data),e}},{key:"draw",value:function(t){for(var e=void 0,a=void 0,i=0,n=this.customLayers.length;i<n;i++)a=this.customLayers[i],e=new window.AMap.CustomLayer(a.canvas,t),e.render=a.draw.bind(a),e.setMap(this.map)}}]),e}(c.default);e.default=p},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){var e=this,a=function(){var t=void 0,a=void 0,i=void 0,n=void 0,o=void 0,l=void 0,r=void 0,s=void 0,c=void 0,d=void 0;e.virtualCtx.clearRect(0,0,e.canvas.width,e.canvas.height);for(var u=0,f=e.curve.cache.length;u<f;u++){t=e.curve.cache[u],e.virtualCtx.beginPath();for(var g=1,v=t.coords.length;g<v;g++)i={coords:t.coords[g-1],lnglat:t.lnglat[g-1]},a={coords:t.coords[g],lnglat:t.lnglat[g]},o=e.map.lngLatToContainer(i.lnglat),n=e.map.lngLatToContainer(a.lnglat),l={x:(o.x+n.x)/2,y:(o.y+n.y)/2},r=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2))/2,s={x:r+l.x,y:l.y},c=Math.atan((n.y-l.y)/(n.x-l.x))-Math.atan((s.y-l.y)/(s.x-l.x)),d=c+Math.PI,e.virtualCtx.arc(l.x,l.y,r,c,d,!0);(0,h.default)(e.virtualCtx,t.lineStyle),(0,p.default)(e.virtualCtx,t.symbol,o,n)}e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.drawImage(e.virtualCanvas,0,0)},i=function(){var t=new Date;a(),console.log("canvas api uses "+(new Date-t)+"ms")},n=function(){var t=void 0,a=void 0,i=void 0,n=void 0,o=void 0,l=void 0,r=void 0,s=void 0,c=void 0,d=void 0,u=function(u){for(var f=u*v,g=(u+1)*v>e.curve.cache.length?e.curve.cache.length:(u+1)*v;f<g;f++){t=e.curve.cache[f],e.virtualCtx.beginPath();for(var y=1,m=t.coords.length;y<m;y++)i={coords:t.coords[y-1],lnglat:t.lnglat[y-1]},a={coords:t.coords[y],lnglat:t.lnglat[y]},o=e.map.lngLatToContainer(i.lnglat),n=e.map.lngLatToContainer(a.lnglat),l={x:(o.x+n.x)/2,y:(o.y+n.y)/2},r=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2))/2,s={x:r+l.x,y:l.y},c=Math.atan((n.y-l.y)/(n.x-l.x))-Math.atan((s.y-l.y)/(s.x-l.x)),d=c+Math.PI,e.virtualCtx.arc(l.x,l.y,r,c,d,!0);(0,h.default)(e.virtualCtx,t.lineStyle),(0,p.default)(e.virtualCtx,t.symbol,o,n),e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.drawImage(e.virtualCanvas,0,0)}},f=new Date,g=e.options.algo.delay.interval,v=e.options.algo.delay.size,y=0,m=e.curve.cache.length/v;e.virtualCtx.clearRect(0,0,e.canvas.width,e.canvas.height),u(y),y++;var b=setInterval(function(){u(y),y+1>m&&clearInterval(b),y++},g);console.log("canvas api uses "+(new Date-f)+"ms")},o=function(){var t=new Date,i=document.getElementById(e.options.id).parentNode;a(),l.default.offsetCanvasPositionOnDrag(i),console.log("canvas api uses "+(new Date-t)+"ms")};if(l.default.setIsInitialLoadIndicator.call(this),!0===t)return this.setBoundLngLat(),this.setMapCentre(),this.cacheVisiblePolyline(),void(void 0===this.options.algo.delay.size?i():n(this.options.algo.delay));!0===this.options.algo.isRealtime?!0===this.isInitialLoad?(this.timerThreshold=100,this.setBoundLngLat(),this.setMapCentre(),this.cacheVisiblePolyline(),i(),this.map.on("dragging",function(t){new Date-e.lastTimer<e.timerThreshold&&clearTimeout(e.timerId),e.timerId=setTimeout(function(){e.setBoundLngLat(),e.setMapCentre(),e.cacheVisiblePolyline(),o()},e.timerThreshold),e.lastTimer=new Date}),this.map.on("zoomend",function(t){e.setBoundLngLat(),e.setMapCentre(),e.cacheVisiblePolyline(),i(),e.lastTimer=new Date})):(l.default.resetCanvasPositionAfterDrag(document.getElementById(this.options.id).parentNode),this.lastTimer=new Date):(this.setBoundLngLat(),this.setMapCentre(),this.cacheVisiblePolyline(),void 0===this.options.algo.delay.size?i():n(this.options.algo.delay))}Object.defineProperty(e,"__esModule",{value:!0});var o=a(0),l=i(o),r=a(2),s=i(r),c=a(1),d=i(c),u=a(4),h=i(u),f=a(3),p=i(f);e.default={importData:s.default,draw:n,cacheVisiblePolyline:d.default}},function(t,e,a){"use strict";function i(t){this.virtualCanvas=t}function n(t){this.virtualCanvas=t,this.draw()}function o(){var t=void 0,e=void 0;if(r.default.setIsInitialLoadIndicator.call(this),e=new AMap.LngLat(this.options.position[0],this.options.position[1]),t=this.map.lngLatToContainer(e),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.virtualCanvas,t.x-this.virtualCanvas.width/2,t.y-this.virtualCanvas.height/2),!0===this.isInitialLoad)this.map.on("dragstart",function(t){s=!0}),this.map.on("dragend",function(t){s=!1});else if(s)r.default.offsetCanvasPositionOnDrag(document.getElementById(this.options.id).parentNode);else try{r.default.resetCanvasPositionAfterDrag(document.getElementById(this.options.id).parentNode)}catch(t){}}Object.defineProperty(e,"__esModule",{value:!0});var l=a(0),r=function(t){return t&&t.__esModule?t:{default:t}}(l),s=!1;e.default={importImage:i,updateImage:n,draw:o}},function(t,e,a){"use strict";function i(){if(this.canvas=this.options.data,this.canvas.style.position="absolute","string"==typeof this.options.position)switch(this.options.position){case"top":this.canvas.style.top="0",this.canvas.style.left="50%",this.canvas.style.transform="translate3d(-50%, 0, 0)";break;case"topright":this.canvas.style.top="0",this.canvas.style.left="100%",this.canvas.style.transform="translate3d(-100%, 0, 0)";break;case"topleft":this.canvas.style.top="0",this.canvas.style.left="0";break;case"right":this.canvas.style.top="50%",this.canvas.style.left="100%",this.canvas.style.transform="translate3d(-100%, -50%, 0)";break;case"bottom":this.canvas.style.top="100%",this.canvas.style.left="50%",this.canvas.style.transform="translate3d(-50%, -100%, 0)";break;case"bottomright":this.canvas.style.top="100%",this.canvas.style.left="100%",this.canvas.style.transform="translate3d(-100%, -100%, 0)";break;case"bottomleft":this.canvas.style.top="100%",this.canvas.style.left="0",this.canvas.style.transform="translate3d(0, -100%, 0)";break;case"left":this.canvas.style.top="50%",this.canvas.style.left="0",this.canvas.style.transform="translate3d(0, -50%, 0)";break;case"center":this.canvas.style.top="50%",this.canvas.style.left="50%",this.canvas.style.transform="translate3d(-50%, -50%, 0)"}else this.canvas.style.top=this.options.position[0].toString()+"px",this.canvas.style.left=this.options.position[1].toString()+"px"}function n(){l.default.setIsInitialLoadIndicator.call(this),!0===this.isInitialLoad&&document.getElementsByClassName("amap-maps")[0].append(this.canvas)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(0),l=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default={importImage:i,draw:n}},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){var e=this,a=void 0,i=function(){var t=void 0;e.virtualCtx.clearRect(0,0,e.virtualCanvas.width,e.virtualCanvas.height);for(var i=0,n=e.marker.cache.length;i<n;i++)a=e.marker.cache[i],t=a.icon,e.virtualCtx.drawImage(t,a.pixel.x-t.width/2,a.pixel.y-t.height);e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.drawImage(e.virtualCanvas,0,0)},n=function(){var t=void 0,i=document.getElementById(e.options.id).parentNode;e.virtualCtx.clearRect(0,0,e.virtualCanvas.width,e.virtualCanvas.height);for(var n=0,o=e.marker.cache.length;n<o;n++)a=e.marker.cache[n],t=a.icon,e.virtualCtx.drawImage(t,a.pixel.x-t.width/2,a.pixel.y-t.height);e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.drawImage(e.virtualCanvas,0,0),l.default.offsetCanvasPositionOnDrag(i)},o=function(){e.setBoundLngLat(),e.cacheVisibleMarker(),i()},r=function(){e.setBoundLngLat(),e.cacheVisibleMarker(),n()},s=function(){return!0===e.options.algo.isRealtime},c=function(){return e.options.onClick instanceof Function},d=function(){o(),e.timerThreshold=100;var t=new l.default.Delay(e.timerThreshold);e.map.on("dragging",function(){t.exec(function(){r()})}),e.map.on("zoomend",function(){r()})},u=function(){e.map.on("click",function(t){for(var a=[],i=void 0,n=void 0,o=void 0,l=void 0,r=void 0,s=e.marker.cache.length-1;s>=0;s--)i=e.marker.cache[s],n=i.icon.width,o=i.icon.height,l={x:i.pixel.x+n/2,y:i.pixel.y-o},r={x:i.pixel.x-n/2,y:i.pixel.y},t.pixel.x<=l.x&&t.pixel.y>=l.y&&t.pixel.x>=r.x&&t.pixel.y<=r.y&&a.push(i);0!==a.length&&(t.marker=a,e.options.onClick(t))})};!function(){if(l.default.setIsInitialLoadIndicator.call(e),!0===e.isInitialLoad&&c()&&u(),!0===t)return void o();s()?!0===e.isInitialLoad?d():l.default.resetCanvasPositionAfterDrag(document.getElementById(e.options.id).parentNode):o()}()}Object.defineProperty(e,"__esModule",{value:!0});var o=a(0),l=i(o),r=a(2),s=i(r),c=a(1),d=i(c);e.default={importData:s.default,draw:n,cacheVisibleMarker:d.default}},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){var e=this,a=function(){var t=void 0,a=void 0,i=void 0;e.virtualCtx.clearRect(0,0,e.canvas.width,e.canvas.height);for(var n=0,o=e.polyline.cache.length;n<o;n++){t=e.polyline.cache[n],e.virtualCtx.beginPath();for(var l=0,r=t.coords.length;l<r;l++)a={coords:t.coords[l],lnglat:t.lnglat[l]},i=e.map.lngLatToContainer(a.lnglat),e.virtualCtx.lineTo(i.x,i.y);(0,h.default)(e.virtualCtx,t.lineStyle),(0,p.default)(e.virtualCtx,t.symbol,e.map.lngLatToContainer(t.lnglat[0]),e.map.lngLatToContainer(t.lnglat[t.lnglat.length-1]))}e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.drawImage(e.virtualCanvas,0,0)},i=function(){a()},n=function(){var t=void 0,a=void 0,i=void 0,n=function(n){for(var o=n*l,r=(n+1)*l>e.polyline.cache.length?e.polyline.cache.length:(n+1)*l;o<r;o++){t=e.polyline.cache[o],e.virtualCtx.beginPath();for(var s=0,c=t.coords.length;s<c;s++)a={coords:t.coords[s],lnglat:t.lnglat[s]},i=e.map.lngLatToContainer(a.lnglat),e.virtualCtx.lineTo(i.x,i.y);(0,h.default)(e.virtualCtx,t.lineStyle),(0,p.default)(e.virtualCtx,t.symbol,e.map.lngLatToContainer(t.lnglat[0]),e.map.lngLatToContainer(t.lnglat[t.lnglat.length-1])),e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.drawImage(e.virtualCanvas,0,0)}},o=e.options.algo.delay.interval,l=e.options.algo.delay.size,r=0,s=e.polyline.cache.length/l;e.virtualCtx.clearRect(0,0,e.canvas.width,e.canvas.height),n(r),r++;var c=setInterval(function(){n(r),r+1>s&&clearInterval(c),r++},o)},o=function(){var t=document.getElementById(e.options.id).parentNode;a(),l.default.offsetCanvasPositionOnDrag(t)},r=function(){return void 0!==e.options.algo.delay.size},s=function(){return!0===e.options.algo.isRealtime},c=function(){e.setBoundLngLat(),e.setMapCentre(),e.cacheVisiblePolyline(),r()?n(e.options.algo.delay):i()},d=function(){e.setBoundLngLat(),e.setMapCentre(),e.cacheVisiblePolyline(),i()},u=function(){d(),e.timerThreshold=100;var t=new l.default.Delay(e.timerThreshold);e.map.on("dragging",function(){t.exec(function(){e.setBoundLngLat(),e.setMapCentre(),e.cacheVisiblePolyline(),o()})}),e.map.on("zoomend",function(){d()})};!function(){if(l.default.setIsInitialLoadIndicator.call(e),!0===t)return void c();s()?!0===e.isInitialLoad?u():l.default.resetCanvasPositionAfterDrag(document.getElementById(e.options.id).parentNode):c()}()}Object.defineProperty(e,"__esModule",{value:!0});var o=a(0),l=i(o),r=a(2),s=i(r),c=a(1),d=i(c),u=a(4),h=i(u),f=a(3),p=i(f);e.default={importData:s.default,draw:n,cacheVisiblePolyline:d.default}},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){var e=this,a=function(){var t=void 0,a=void 0,i=void 0,n=void 0,o=void 0,l=void 0,r=void 0,s=void 0,c=void 0,d=void 0,u=void 0,f=void 0,g=void 0,v=void 0,y=void 0,m=void 0;e.virtualCtx.clearRect(0,0,e.canvas.width,e.canvas.height);for(var b=0,x=e.curve.cache.length;b<x;b++){t=e.curve.cache[b],e.virtualCtx.beginPath();for(var w=1,L=t.coords.length;w<L;w++)i={coords:t.coords[w-1],lnglat:t.lnglat[w-1]},a={coords:t.coords[w],lnglat:t.lnglat[w]},o=e.map.lngLatToContainer(i.lnglat),n=e.map.lngLatToContainer(a.lnglat),l={x:(o.x+n.x)/2,y:(o.y+n.y)/2},r=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2)),s=r/4,c=-(o.x-n.x)/(o.y-n.y),d=l.y-c*l.x,u=1+Math.pow(c,2),f=2*(c*d-l.x-c*l.y),g=Math.pow(l.x,2)+Math.pow(l.y,2)+Math.pow(d,2)-2*d*l.y-Math.pow(s,2),v=(-f+Math.sqrt(Math.pow(f,2)-4*u*g))/(2*u),y=c*v+d,m={x:v,y:y},e.virtualCtx.moveTo(o.x,o.y),e.virtualCtx.quadraticCurveTo(m.x,m.y,n.x,n.y);(0,h.default)(e.virtualCtx,t.lineStyle),(0,p.default)(e.virtualCtx,t.symbol,o,n)}e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.drawImage(e.virtualCanvas,0,0)},i=function(){var t=new Date;a(),console.log("canvas api uses "+(new Date-t)+"ms")},n=function(){var t=void 0,a=void 0,i=void 0,n=void 0,o=void 0,l=void 0,r=void 0,s=void 0,c=void 0,d=void 0,u=void 0,f=void 0,g=void 0,v=void 0,y=void 0,m=void 0,b=function(b){for(var x=b*L,w=(b+1)*L>e.curve.cache.length?e.curve.cache.length:(b+1)*L;x<w;x++){t=e.curve.cache[x],e.virtualCtx.beginPath();for(var C=1,I=t.coords.length;C<I;C++)i={coords:t.coords[C-1],lnglat:t.lnglat[C-1]},a={coords:t.coords[C],lnglat:t.lnglat[C]},o=e.map.lngLatToContainer(i.lnglat),n=e.map.lngLatToContainer(a.lnglat),l={x:(o.x+n.x)/2,y:(o.y+n.y)/2},r=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2)),s=r/4,c=-(o.x-n.x)/(o.y-n.y),d=l.y-c*l.x,u=1+Math.pow(c,2),f=2*(c*d-l.x-c*l.y),g=Math.pow(l.x,2)+Math.pow(l.y,2)+Math.pow(d,2)-2*d*l.y-Math.pow(s,2),v=(-f+Math.sqrt(Math.pow(f,2)-4*u*g))/(2*u),y=c*v+d,m={x:v,y:y},e.virtualCtx.moveTo(o.x,o.y),e.virtualCtx.quadraticCurveTo(m.x,m.y,n.x,n.y);(0,h.default)(e.virtualCtx,t.lineStyle),(0,p.default)(e.virtualCtx,t.symbol,o,n),e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.drawImage(e.virtualCanvas,0,0)}},x=new Date,w=e.options.algo.delay.interval,L=e.options.algo.delay.size,C=0,I=e.curve.cache.length/L;e.virtualCtx.clearRect(0,0,e.canvas.width,e.canvas.height),b(C),C++;var M=setInterval(function(){b(C),C+1>I&&clearInterval(M),C++},w);console.log("canvas api uses "+(new Date-x)+"ms")},o=function(){var t=new Date,i=document.getElementById(e.options.id).parentNode;a(),l.default.offsetCanvasPositionOnDrag(i),console.log("canvas api uses "+(new Date-t)+"ms")};if(l.default.setIsInitialLoadIndicator.call(this),!0===t)return this.setBoundLngLat(),this.setMapCentre(),this.cacheVisiblePolyline(),void(void 0===this.options.algo.delay.size?i():n(this.options.algo.delay));!0===this.options.algo.isRealtime?!0===this.isInitialLoad?(this.timerThreshold=100,this.setBoundLngLat(),this.setMapCentre(),this.cacheVisiblePolyline(),i(),this.map.on("dragging",function(t){new Date-e.lastTimer<e.timerThreshold&&clearTimeout(e.timerId),e.timerId=setTimeout(function(){e.setBoundLngLat(),e.setMapCentre(),e.cacheVisiblePolyline(),o()},e.timerThreshold),e.lastTimer=new Date}),this.map.on("zoomend",function(t){e.setBoundLngLat(),e.setMapCentre(),e.cacheVisiblePolyline(),i(),e.lastTimer=new Date})):(l.default.resetCanvasPositionAfterDrag(document.getElementById(this.options.id).parentNode),this.lastTimer=new Date):(this.setBoundLngLat(),this.setMapCentre(),this.cacheVisiblePolyline(),void 0===this.options.algo.delay.size?i():n(this.options.algo.delay))}Object.defineProperty(e,"__esModule",{value:!0});var o=a(0),l=i(o),r=a(2),s=i(r),c=a(1),d=i(c),u=a(4),h=i(u),f=a(3),p=i(f);e.default={importData:s.default,draw:n,cacheVisiblePolyline:d.default}},function(t,e,a){"use strict";function i(t){var e=this;this.tooltip={},this.tooltip.original=[],function(t){for(var a=0,i=t.location.length;a<i;a++){var n=t.location[a];e.tooltip.original.push({location:n,lnglat:new AMap.LngLat(n[0],n[1]),markerSize:t.markerSize[a],desc:t.desc[a]})}}(t)}function n(){var t=this,e=function(e){var a=Number(e.font.match(/^\d+/)),i=a*e.lineHeight,n=e.text.length,o=Math.floor((e.width-2*e.padding)/a),l=Math.ceil(n/o),r=void 0;t.ctx.beginPath(),function(){r={x:e.left,y:0},t.ctx.fillStyle=e.backgroundColor,t.ctx.rect(e.origin.x+r.x,e.origin.y+r.y,e.width+2*e.padding,i*l+2*e.padding),t.ctx.fill()}(),function(){t.ctx.font=e.font,t.ctx.fillStyle=e.color;for(var n=0;n<l;n++)r={x:e.left+e.padding,y:e.padding+(n+.5)*i+a/2},t.ctx.fillText(e.text.slice(n*o,(n+1)*o),e.origin.x+r.x,e.origin.y+r.y)}()},a=void 0,i=void 0;r.default.setIsInitialLoadIndicator.call(this),this.setBoundLngLat(),this.cacheVisibleTooltip(),!0===this.isInitialLoad&&(this.map.on("movestart",function(t){s=!0}),this.map.on("moveend",function(t){s=!1}),this.map.on("mousemove",function(n){var o=function(t,e,i){return a=t.boundPixel,n.pixel.x<=a[0]&&n.pixel.y>=a[1]&&n.pixel.x>=a[2]&&n.pixel.y<=a[3]};if(!1===s)if(!0===t.options.cumulative){if(i=r.default.findAll(t.tooltip.cache,o),t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),0!==i.length)for(var l=0,c=i.length;l<c;l++)e({text:i[l].desc,origin:{x:i[c-1].boundPixel[0],y:i[c-1].boundPixel[1]+(2*t.options.padding+t.options.lineHeight*Number(t.options.font.match(/^\d+/)))*l},left:t.options.left,padding:t.options.padding,width:t.options.width,lineHeight:t.options.lineHeight,font:t.options.font,color:t.options.color,backgroundColor:t.options.backgroundColor})}else i=r.default.findLast(t.tooltip.cache,o),t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),i&&e({text:i.desc,origin:{x:i.boundPixel[0],y:i.boundPixel[1]},left:t.options.left,padding:t.options.padding,width:t.options.width,lineHeight:t.options.lineHeight,font:t.options.font,color:t.options.color,backgroundColor:t.options.backgroundColor})}))}function o(){var t=new Date,e=void 0,a=void 0,i=void 0,n=void 0;this.tooltip.cache=[];for(var o=0,l=this.tooltip.original.length;o<l;o++)e=this.tooltip.original[o],i=e.lnglat.lng,n=e.lnglat.lat,i<=this.boundLngLat[0]&&n<=this.boundLngLat[1]&&i>=this.boundLngLat[2]&&n>=this.boundLngLat[3]&&(a=this.map.lngLatToContainer(e.lnglat),this.tooltip.cache.push(Object.assign({},e,{boundPixel:[a.x+e.markerSize.width/2,a.y-e.markerSize.height,a.x-e.markerSize.width/2,a.y]})));console.log("cache function uses "+(new Date-t)+"ms")}Object.defineProperty(e,"__esModule",{value:!0});var l=a(0),r=function(t){return t&&t.__esModule?t:{default:t}}(l),s=!1;e.default={importData:i,draw:n,cacheVisibleTooltip:o}},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=a(15),r=i(l),s=a(20),c=i(s),d=document.createElement("img");d.src=c.default;var u=function(){function t(){n(this,t),this.components=[]}return o(t,[{key:"createComponent",value:function(t){var e=void 0;switch(t.type){case"timeAxis":e={type:t.type,id:"string"==typeof t.id?t.id:void 0,data:t.data instanceof Array?t.data:void 0,onDrag:t.onDrag instanceof Function?t.onDrag:void 0,width:"number"==typeof t.width?t.width:window.innerWidth,height:"number"==typeof t.height?t.height:42,paddle:d,scrollBorderWidth:"number"==typeof t.scrollBorderWidth?t.scrollBorderWidth:1,scrollColor:"string"==typeof t.scrollColor?t.scrollColor:"#DFDFDF",labelColor:"string"==typeof t.labelColor?t.labelColor:"#545454",labelSize:"number"==typeof t.labelSize?t.number:14,coverColor:"string"==typeof t.coverColor?t.coverColor:"rgba(193, 206, 213, 0.3)"};break;default:throw new Error("unknown component type")}this.createTool(e)}},{key:"createTool",value:function(t){var e=void 0;return e=new r.default,this.components.push(e),e.config(t),e}}]),t}();e.default=u},function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),o=a(0),l=function(t){return t&&t.__esModule?t:{default:t}}(o),r=function(){function t(){i(this,t)}return n(t,[{key:"config",value:function(t){this.options=Object.assign({},t),this.init(),this.draw()}},{key:"draw",value:function(){var t=this;!function(){void 0===t.scroll.cache&&(t.scroll.ctx.strokeStyle=t.options.scrollColor,t.scroll.ctx.strokeRect(0,0,t.scroll.canvas.width,t.scroll.canvas.height),t.scroll.cache={canvas:t.scroll.canvas})}(),function(){void 0===t.paddleLeft.cache&&(t.paddleLeft.ctx.drawImage(t.options.paddle,0,0),t.paddleLeft.cache={canvas:t.paddleLeft.canvas})}(),function(){void 0===t.paddleRight.cache&&(t.paddleRight.ctx.drawImage(t.options.paddle,0,0),t.paddleRight.cache={canvas:t.paddleRight.canvas})}(),function(){t.labelLeft.ctx.clearRect(0,0,t.labelLeft.canvas.width,t.labelLeft.canvas.height),t.labelLeft.ctx.font=t.options.labelSize+"px monospace",t.labelLeft.ctx.textAlign="center",t.labelLeft.ctx.textBaseline="middle",t.labelLeft.ctx.strokeStyle=t.options.labelColor,t.labelLeft.ctx.fillText(t.labelLeft.text,t.labelLeft.canvas.width/2,t.labelLeft.canvas.height/2)}(),function(){t.labelRight.ctx.clearRect(0,0,t.labelRight.canvas.width,t.labelRight.canvas.height),t.labelRight.ctx.font=t.options.labelSize+"px monospace",t.labelRight.ctx.textAlign="center",t.labelRight.ctx.textBaseline="middle",t.labelRight.ctx.strokeStyle=t.options.labelColor,t.labelRight.ctx.fillText(t.labelRight.text,t.labelRight.canvas.width/2,t.labelRight.canvas.height/2)}(),function(){t.cover.canvas.width=t.cover.canvas.width,t.cover.ctx.fillStyle=t.options.coverColor,t.cover.ctx.fillRect(0,0,t.cover.canvas.width,t.cover.canvas.height)}(),function(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.ctx.drawImage(t.scroll.canvas,t.scroll.position.x,t.scroll.position.y),t.ctx.drawImage(t.paddleLeft.canvas,t.paddleLeft.position.x,t.paddleLeft.position.y),t.ctx.drawImage(t.paddleRight.canvas,t.paddleRight.position.x,t.paddleRight.position.y),t.ctx.drawImage(t.labelLeft.canvas,t.labelLeft.position.x,t.labelLeft.position.y),t.ctx.drawImage(t.labelRight.canvas,t.labelRight.position.x,t.labelRight.position.y),t.ctx.drawImage(t.cover.canvas,t.cover.position.x,t.cover.position.y)}()}},{key:"init",value:function(){var t=this,e=function(e){var a=function(){var e=void 0,a=void 0;return t.paddleLeft.position.x<=t.paddleRight.position.x?(e="paddleLeft",a="paddleRight"):(e="paddleRight",a="paddleLeft"),l.default.isPointInPath({x:t[e].position.x+t[e].canvas.width,y:t[e].position.y,width:t[a].position.x-t[e].position.x,height:t[e].canvas.height},{x:t.canvas.drag.start.layerX,y:t.canvas.drag.start.layerY})},i=function(){return["paddleLeft","paddleRight"].find(function(e){return l.default.isPointInPath({x:t[e].position.x,y:t[e].position.y,width:t[e].canvas.width,height:t[e].canvas.height},{x:t.canvas.drag.start.layerX,y:t.canvas.drag.start.layerY})})},n=function(a){var i=e.pageX-t.canvas.drag.start.pageX,n=t.canvas.drag.start.layerX+i-t.canvas.drag.offsetPaddle.x;n<=t[a].restrictions.minX?t[a].position.x=t[a].restrictions.minX:n>=t[a].restrictions.maxX?t[a].position.x=t[a].restrictions.maxX:t[a].position.x=n,o(),r(),t.draw()},o=function(){var e=function(t,e){var a=e.length-1;return Math.floor(t*a)},a=function(a,i){var n=Math.floor(t[i].position.x-t.labelLeft.canvas.width+t.paddleLeft.canvas.width/2),o=n/t.scroll.canvas.width,l=e(o,t.options.data),r=t.options.data[l];t[a].text=r};t.paddleLeft.position.x<=t.paddleRight.position.x?(a("labelLeft","paddleLeft"),a("labelRight","paddleRight")):(a("labelLeft","paddleRight"),a("labelRight","paddleLeft"))},r=function(){var e=t.paddleRight.position.x-t.paddleLeft.position.x;t.cover.canvas.width=Math.abs(e),t.cover.position.x=e>=0?t.paddleLeft.position.x+t.paddleLeft.canvas.width/2:t.paddleRight.position.x+t.paddleRight.canvas.width/2},s=function(){t.options.onDrag(e,{paddleLeft:{position:t.paddleLeft.position},paddleRight:{position:t.paddleRight.position},labelLeft:{text:t.labelLeft.text},labelRight:{text:t.labelRight.text}})};return!0===t.canvas.drag.isFirstMove&&(t.paddleLeft.positionBeforeDrag=Object.assign({},t.paddleLeft.position),t.paddleRight.positionBeforeDrag=Object.assign({},t.paddleRight.position),t.canvas.drag.targetName=function(){var t=i();return void 0!==t?t:!0===a()?"cover":void 0}(),/^paddle(Left|Right)/.test(t.canvas.drag.targetName)&&function(e){t.canvas.drag.offsetPaddle=l.default.pointPositionRelativeToPath({x:t[e].position.x,y:t[e].position.y,width:t[e].canvas.width,height:t[e].canvas.height},{x:t.canvas.drag.start.layerX,y:t.canvas.drag.start.layerY}),t.canvas.drag.offsetPaddle.x=Math.ceil(t.canvas.drag.offsetPaddle.x),t.canvas.drag.offsetPaddle.y=Math.ceil(t.canvas.drag.offsetPaddle.y)}(t.canvas.drag.targetName)),"paddleLeft"===t.canvas.drag.targetName?(n("paddleLeft"),void s()):"paddleRight"===t.canvas.drag.targetName?(n("paddleRight"),void s()):"cover"===t.canvas.drag.targetName?(function(){var a=e.pageX-t.canvas.drag.start.pageX,i=[];t.paddleLeft.positionBeforeDrag.x+a<=t.paddleLeft.restrictions.minX&&i.push(t.paddleLeft.restrictions.minX-t.paddleLeft.positionBeforeDrag.x),t.paddleLeft.positionBeforeDrag.x+a>=t.paddleLeft.restrictions.maxX&&i.push(t.paddleLeft.restrictions.maxX-t.paddleLeft.positionBeforeDrag.x),t.paddleRight.positionBeforeDrag.x+a<=t.paddleRight.restrictions.minX&&i.push(t.paddleRight.restrictions.minX-t.paddleRight.positionBeforeDrag.x),t.paddleRight.positionBeforeDrag.x+a>=t.paddleRight.restrictions.maxX&&i.push(t.paddleRight.restrictions.maxX-t.paddleRight.positionBeforeDrag.x),0!==i.length&&(a=2===i.length&&(i[0]<0||i[1]<0)?Math.max.apply(null,i):Math.min.apply(null,i)),t.paddleLeft.position.x=t.paddleLeft.positionBeforeDrag.x+a,t.paddleRight.position.x=t.paddleRight.positionBeforeDrag.x+a,o(),r(),t.draw()}(),void s()):void 0};!function(){t.canvas=document.getElementById(t.options.id),t.canvas.width=t.options.width,t.canvas.height=t.options.height,t.ctx=t.canvas.getContext("2d"),t.canvas.__proto__.bindEvent=l.default.bindEvent,t.canvas.bindEvent("drag",e)}(),function(){t.scroll={canvas:document.createElement("canvas")},t.scroll.canvas.width=.8*t.options.width,t.scroll.canvas.height=t.options.height,t.scroll=Object.assign({},t.scroll,{ctx:t.scroll.canvas.getContext("2d"),position:{x:(t.options.width-t.scroll.canvas.width)/2,y:(t.options.height-t.scroll.canvas.height)/2}})}(),function(){t.paddleLeft={canvas:document.createElement("canvas")},t.paddleLeft.canvas.width=t.options.paddle.width,t.paddleLeft.canvas.height=t.options.paddle.height,t.paddleLeft=Object.assign({},t.paddleLeft,{ctx:t.paddleLeft.canvas.getContext("2d"),position:{x:(t.options.width-t.scroll.canvas.width-t.paddleLeft.canvas.width)/2,y:(t.options.height-t.paddleLeft.canvas.height)/2},positionBeforeDrag:{x:(t.options.width-t.scroll.canvas.width-t.paddleLeft.canvas.width)/2,y:(t.options.height-t.paddleLeft.canvas.height)/2},restrictions:{minX:(t.options.width-t.scroll.canvas.width-t.paddleLeft.canvas.width)/2,maxX:(t.options.width+t.scroll.canvas.width-t.paddleLeft.canvas.width)/2}})}(),function(){t.paddleRight={canvas:document.createElement("canvas")},t.paddleRight.canvas.width=t.options.paddle.width,t.paddleRight.canvas.height=t.options.paddle.height,t.paddleRight=Object.assign({},t.paddleRight,{ctx:t.paddleRight.canvas.getContext("2d"),position:{x:(t.options.width+t.scroll.canvas.width-t.paddleRight.canvas.width)/2,y:(t.options.height-t.paddleRight.canvas.height)/2},positionBeforeDrag:{x:(t.options.width+t.scroll.canvas.width-t.paddleRight.canvas.width)/2,y:(t.options.height-t.paddleRight.canvas.height)/2},restrictions:{minX:(t.options.width-t.scroll.canvas.width-t.paddleLeft.canvas.width)/2,maxX:(t.options.width+t.scroll.canvas.width-t.paddleLeft.canvas.width)/2}})}(),function(){t.labelLeft={canvas:document.createElement("canvas")},t.labelLeft.canvas.width=.1*t.options.width,t.labelLeft.canvas.height=t.options.height,t.labelLeft=Object.assign({},t.labelLeft,{ctx:t.labelLeft.canvas.getContext("2d"),position:{x:0,y:0},text:t.options.data[0]})}(),function(){t.labelRight={canvas:document.createElement("canvas")},t.labelRight.canvas.width=.1*t.options.width,t.labelRight.canvas.height=t.options.height,t.labelRight=Object.assign({},t.labelRight,{ctx:t.labelRight.canvas.getContext("2d"),position:{x:t.options.width-t.labelRight.canvas.width,y:0},text:t.options.data.slice(-1)})}(),function(){t.cover={canvas:document.createElement("canvas")},t.cover.canvas.width=t.paddleRight.position.x-t.paddleLeft.position.x,t.cover.canvas.height=t.options.height-2*t.options.scrollBorderWidth,t.cover=Object.assign({},t.cover,{ctx:t.cover.canvas.getContext("2d"),position:{x:t.paddleLeft.position.x+t.paddleLeft.canvas.width/2,y:t.options.scrollBorderWidth}})}()}}]),t}();e.default=r},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),s=a(6),c=i(s),d=a(0),u=i(d),h=function(t){function e(t,a){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.map=new window.AMap.Map(t,a),i}return l(e,t),r(e,[{key:"setFit",value:function(t){var e=void 0;switch(t.options.type){case"polyline":e="polyline";break;case"marker":e="marker";break;default:throw new Error("unkown palette")}var a=u.default.pluck(t[e].original,"lnglat"),i=u.default.pluck(a,"lng"),n=u.default.pluck(a,"lat"),o=Math.max.apply(null,i),l=Math.min.apply(null,i),r=Math.max.apply(null,n),s=Math.min.apply(null,n),c=new window.AMap.LngLat(o,r),d=new window.AMap.LngLat(l,s),h=new window.AMap.Bounds(d,c);this.map.setBounds(h)}}]),e}(c.default);e.default=h;e.Util=u.default},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),l=a(11),r=i(l),s=a(7),c=i(s),d=a(12),u=i(d),h=a(10),f=i(h),p=a(13),g=i(p),v=a(8),y=i(v),m=a(9),b=i(m),x=a(18),w=i(x),L=function(){function t(e,a){switch(n(this,t),a.type){case"polyline":this.updatePalette=w.default,this.import=r.default.importData,this.draw=r.default.draw,this.cacheVisiblePolyline=r.default.cacheVisiblePolyline;break;case"curve":this.import=c.default.importData,this.draw=c.default.draw,this.cacheVisiblePolyline=c.default.cacheVisiblePolyline;break;case"quadraticCurve":this.import=u.default.importData,this.draw=u.default.draw,this.cacheVisiblePolyline=u.default.cacheVisiblePolyline;break;case"marker":this.updatePalette=w.default,this.import=f.default.importData,this.draw=f.default.draw,this.cacheVisibleMarker=f.default.cacheVisibleMarker;break;case"tooltip":this.import=g.default.importData,this.draw=g.default.draw,this.cacheVisibleTooltip=g.default.cacheVisibleTooltip;break;case"fixedLocationExternal":this.import=y.default.importImage,this.draw=y.default.draw,this.update=y.default.updateImage;break;case"fixedScreenExternal":this.import=b.default.importImage,this.draw=b.default.draw}this.map=e,this.options=a,this.canvas=document.createElement("canvas"),this.canvas.id=this.options.id,this.canvas.width=this.map.getSize().width,this.canvas.height=this.map.getSize().height,this.ctx=this.canvas.getContext("2d"),this.virtualCanvas=document.createElement("canvas"),this.virtualCanvas.width=this.map.getSize().width,this.virtualCanvas.height=this.map.getSize().height,this.virtualCtx=this.virtualCanvas.getContext("2d"),this.isInitialLoad=void 0}return o(t,[{key:"setBoundLngLat",value:function(){var t=void 0,e=void 0,a=void 0;t=this.map.getBounds(),a=t.getNorthEast(),e=t.getSouthWest(),this.boundLngLat=[a.lng,a.lat,e.lng,e.lat]}},{key:"setMapCentre",value:function(){this.mapCentre=this.map.getCenter()}}]),t}();e.default=L},function(t,e,a){"use strict";function i(t){var e=(0,o.default)(t);this.import(e.data)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=a(5),o=function(t){return t&&t.__esModule?t:{default:t}}(n)},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAhCAYAAAA74pBqAAACmElEQVR42qWUXUiTcRTG35Kiy+imCJISp+9mLmcrTae1/Nz0Iug2qCgMKyRik4r8zpzfm5predFlXdZNEfkJIVRQkkQRTfuSlLXMOTc1t9N5IAY25/a+Xfz4c855nh8MtglEFIaxxbuTMTPDzBSz9PcdwR73tXqrBkOzZxPTwPiMtiUqsQeo1EFU2sfwixl73JFDfk1ZsWVuKzNgsPqp5A6RsS8yuCPH+UFm2ypZUdNsHNNfbPOTEaIYQZ57o8zmkKyw0V1b1L5ABgdJBj30CbKCG67tjK/QvkKFjqBk0EMfHiGvfsaU3zZPBbeDskGfPWbhaN33wbwuP+XZA7JBHx5BX/NtRt+zTPreFdmgz55p4XDVl8CR3t/0v8Aj5F6fnM/tWaLcW8uyQZ89HiHnmvO1rtNLOl7IBX32jAnZVz/Ysi0uOtS9KBv02dMtZFW+z8yqmqSMLr9s0IdHwDc30/x2OLNxmg7afJJBD/3QzynDNJ7MLGo7PKS1LsQM8uihH5KBA5fH6rQ1nyjd6o0Z5NEL+wvSXnq1hZnQ3JyhfZ3zUUEOefTCZCC94uUxzZV3lNrhiQpyyEf8pwWai8/71bWfKaV9LiK4c24A+XVlaRdG1UxA1faLIoE7clFlQF3+7F5KlZPE1tkwsMcduZhkqedGVExQ0fqT/gV73GOWgb1lQw+SqycoscUdAjP2uEuSqc4O5IsVLyih2R0CM/aSZcozTzcwzoSGKdpj+UF4MWMvWQbE00+qE01vKN7iIrw812AvS5Z86rGoKBuiXU0uwotZtgwknXz0Mb7+K+HFLFmWIsRtZHYwYtLxu/d3m8cJL2bscZciQ2k/EHXmcsWJh14xp/I8ZoC7FJkSpXVQyvqYTBoEeKN9zD/ozGaYK5XXKgAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgMTAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjEgKDM5MDEyKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT7mi5bliqjovbQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i57uE5Lu2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI1LjAwMDAwMCwgLTU1LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0i5ouW5Yqo6L20IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjUuMDAwMDAwLCA1NS4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIGZpbGw9IiNCOEJFQzIiIHg9IjQiIHk9IjAiIHdpZHRoPSIyIiBoZWlnaHQ9IjQwIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTIiIGZpbGw9IiNCOEJFQzIiIHg9IjAiIHk9IjEwIiB3aWR0aD0iMTAiIGhlaWdodD0iMjAiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMyIgZmlsbD0iI0ZGRkZGRiIgeD0iMSIgeT0iMTUiIHdpZHRoPSI4IiBoZWlnaHQ9IjEiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMy1Db3B5IiBmaWxsPSIjRkZGRkZGIiB4PSIxIiB5PSIyNCIgd2lkdGg9IjgiIGhlaWdodD0iMSI+PC9yZWN0PgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="}]);